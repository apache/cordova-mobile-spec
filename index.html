<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
  <head>
  	<meta http-equiv="Content-Type" content="text/html;charset=UTF-8" />
  	<title>QUnit results for PhoneGap JS API</title>

	<!-- Make sure you copy in phonegap.js from the PhoneGap repository (that's what you're testing, right?) -->
    <script type="text/javascript" src="phonegap.js"></script>

	<script>
		// Hook window.addEventListener for 'load' event used by qunit.
		// The load function must run after deviceready event is received from PhoneGap.
		var windowEventListener = window.addEventListener;
		var qunitLoadFunction = null;
		window.addEventListener = function(type, f, b) {
			if (type != 'load') {
				windowEventListener(type, f, b);
			}
			else {
				qunitLoadFunction = f;
			}
		}
	</script>

    <!-- You need the following two files in the same directory for QUnit to run. -->
    <link rel="stylesheet" type="text/css" href="qunit.css" />
	<script type="text/javascript" src="qunit.js"></script>
	<!-- Make sure you copy in phonegap.js from the PhoneGap repository (that's what you're testing, right?) -->
	<script type="text/javascript">

		// Override QUnit.done function	to display result of tests
		QUnit.done = function(failures, total) {
			console.log("Test run complete: "+failures+" tests failed out of "+total+" tests.");
        	alert("Test run complete: "+failures+" tests failed out of "+total+" tests.");
		}

		// Tests to run
       	function Tests() {
           this.TEST_TIMEOUT = 15000;
       	};
       	var tests = new Tests();
       	FILE_ROOT = "undefined";

       	// Runs each function in Tests that contains 'Tests' in the name.
       	function run() {
           	if (navigator.userAgent.indexOf("Android") != -1) {
           		FILE_ROOT = "/sdcard/";
           	}
           	else if (navigator.userAgent.indexOf("BlackBerry") != -1) {
           		FILE_ROOT = "file:///SDCard/";
           	}
           	else if (navigator.userAgent.indexOf("iPhone") != -1 || navigator.userAgent.indexOf("iPad")) {
           		FILE_ROOT = "";  // Need to find out
           	}

			// Deviceready has fired, so now qunit can be loaded
			if (qunitLoadFunction) {
				qunitLoadFunction();
			}

           	for (var t in tests) {
               	if (t.indexOf('Tests') > -1) {
                   	tests[t]();
               	}
           	}
       	}

		document.addEventListener('deviceready', run, false);

	</script>
	<script type="text/javascript" src="tests/accelerometer.tests.js"></script>
	<script type="text/javascript" src="tests/contacts.tests.js"></script>
	<script type="text/javascript" src="tests/camera.tests.js"></script>
	<script type="text/javascript" src="tests/device.tests.js"></script>
	<script type="text/javascript" src="tests/file.tests.js"></script>
	<script type="text/javascript" src="tests/geolocation.tests.js"></script>
	<script type="text/javascript" src="tests/map.tests.js"></script>
	<script type="text/javascript" src="tests/network.tests.js"></script>
	<script type="text/javascript" src="tests/notification.tests.js"></script>
	<script type="text/javascript" src="tests/orientation.tests.js"></script>
	<script type="text/javascript" src="tests/sms.tests.js"></script>
	<script type="text/javascript" src="tests/telephony.tests.js"></script>
	<script type="text/javascript" src="tests/storage.tests.js"></script>
	<script type="text/javascript" src="tests/system.tests.js"></script>
  </head>
	<body>
		<h1 id="qunit-header">Mobile Spec (PhoneGap) Tests</h1>
		<h2 id="qunit-banner"></h2>
		<h2 id="qunit-userAgent"></h2>
		<ol id="qunit-tests"></ol>
	</body>
</html>
